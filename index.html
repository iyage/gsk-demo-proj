<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>TPI Calls Mapping</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
    <style>

        @import url('https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&display=swap');
        *{
            font-family: 'Roboto Mono', monospace;
        }
        .location{
            height:80vh;
            overflow-y: scroll;
        }
            .tpi-calls>.card-body{
            overflow: scroll;
        }

       .location::-webkit-scrollbar {
        width:5px;
    }
   .location::-webkit-scrollbar-thumb {
        background-color: black;
        border-radius: 7px;
    }
    .location::-webkit-scrollbar-track {
        background-color: white;
    }
        .headerTittle{
            font-size: 14px;
            font-weight: 700;
        }
        li{
            list-style: none;
            padding: 5px;
            cursor: pointer;
            margin: 5px 0;
            border: solid 0.5px gray;
            font-size: 14px;
        }
        .card-body>ol>li{
            list-style: unset;
            border: none;
            cursor: none;
        }
        #map {
            height: 85vh;
        }
        .accordion{
            width: 100%;
        }
        h5{
            font-size: 16px;
        }
        table,th,td{
            border: 2px solid;
        }
        th,td{
            white-space: nowrap;
            padding: 5px;
            font-size: 14px;
        }
  
    .tpi-calls{
        display: none;
        transition:ease-in-out 2s
    }
    </style>
</head>
<div class="container-fluid my-3">
    <div class="row justify-content-center" style="margin:30px 0 ;">
        <div class="col-md-12 col-sm-12 ">
            <div class="card tpi-calls" style="width: 100%;">
                <div class="card-header">
                    <h5 style="text-align:center ;">TPI Calls</h5>
                </div>
                <div class="card-body">
                    <table>
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Phone No.</th>
                                <th>Market</th>
                                <th>Client</th>
                                <th>Product</th>
                                <th>Pin</th>
                                <th>Is Sproxil Alerted</th>
                                <th>Survey Length</th>
                                <th> What is the name of the shop where the product was purchased?</th>
                                <th>In what city did you purchase the product?</th>
                                <th> In what state did you purchase the product?</th>
                                <th>Please describe where this shop is located. Is there a landmark or bus stop close by?</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr id="all-reponse">
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <div class="row gx-3">
        <div class="col-md-4  col-sm12">
            <div class="card ">
                <div class="card-header">
                    <h3 class="headerTittle">
                        Possible TPI Calls Location
                    </h3>

                </div>
                <div class="card-body location " style="padding:2px">
                    <div class="accordion" id="accordionExample" >
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="headingOne">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                                    +2349161333062
                                </button>
                            </h2>
                            <div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
                                <div class="accordion-body" style="padding:5px;padding-left:2px ;">
                                    <ul>
                                        <li class="location-link">Gatelink Filling Station Oba Erinwole Road Obafemi</li>
                                        <li class="location-link">United Bank For Africa  Along Oba Erinwole Road</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item">
                            <h2 class="accordion-header" id="headingTwo">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                                    +2347032897734
                                </button>
                            </h2>
                            <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#accordionExample">
                                <div class="accordion-body">
                                    <ul>
                                        <li class="location-link">Delta Guest House Ashaka Road Ndokwa West </li>
                                        <li class="location-link"> Nation Of Greatness Int'l Gospel Church Ashaka Road Off Butter Garden  Ndokwa West</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item">
                            <h2 class="accordion-header" id="headingThree">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">+2349060571985
                                </button>
                            </h2>
                            <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#accordionExample">
                                <div class="accordion-body">
                                    <ul>
                                        <li class="location-link">First Bank  New Market Road  Off Edozie Lane</li>
                                        <li class="location-link">
                                            First Bank  Off Edozie Lane Onitsha 
                                        </li>
                                        <li class="location-link">Onitsha Main Market  Along New Market Road  Off Edozie Lane</li>
                                        <li class="location-link">
                                            Onitsha Main Market 
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item">
                            <h2 class="accordion-header" id="headingFour">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse4" aria-expanded="false" aria-controls="collapseThree">+2348169603159
                                </button>
                            </h2>
                            <div id="collapse4" class="accordion-collapse collapse" aria-labelledby="headingFour" data-bs-parent="#accordionExample">
                                <div class="accordion-body">
                                    <ul>
                                        <li class="location-link">Access Bank  Onitsha Main Market   Onitsha</li>
                                        <li class="location-link">
                                            Access Bank Johnson Street  Close To Moorfleet International Limited 
                                        </li>
                                        <li class="location-link">Access Bank  Johnson Street </li>
                                        <li class="location-link">
                                            Moorfleet International Limited 
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item">
                            <h2 class="accordion-header" id="heading5">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse5" aria-expanded="false" aria-controls="collapse5">+2348037299767
                                </button>
                            </h2>
                            <div id="collapse5" class="accordion-collapse collapse" aria-labelledby="heading5" data-bs-parent="#accordionExample">
                                <div class="accordion-body">
                                    <ul>
                                        <li class="location-link">Rays Of Hope International School  Cele Bus Stop  Close To Christ Apostolic Church  Off Akinseea Road</li>
                                        <li class="location-link">
                                            Rays Of Hope International School  Cele Bus Stop  Close To Christ Apostolic Church  Off Akinsesi
                                        </li>
                                        <li class="location-link"> Rays Of Hope International School Ado-Odo/Ota  ogun state </li>
                                        <li class="location-link"> Rays Of Hope International School Cele Bus-Stop Ado-Odo/Ota  ogun state </li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item">
                            <h2 class="accordion-header" id="heading6">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse6" aria-expanded="false" aria-controls="collapse6">+2348037299767
                                </button>
                            </h2>
                            <div id="collapse6" class="accordion-collapse collapse" aria-labelledby="heading6" data-bs-parent="#accordionExample">
                                <div class="accordion-body">
                                    <ul>
                                        <li class="location-link">Holy Trinity Anglican Church Owutu Bus Stop Mbaise </li>
                                        <li class="location-link">
                                            0wutu Bus Stop  Close To Nzeribe Hotel  Along Oboama Ezinihime Road
                                        </li>
                                        <li class="location-link"> Nzeribe Hotel  Along Oboama Ezinihime Road  </li>
                                        <li class="location-link"> Oboama Ezinihime Road </li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item">
                            <h2 class="accordion-header" id="heading7">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse7" aria-expanded="false" aria-controls="collapse7">+2347048483175
                                </button>
                            </h2>
                            <div id="collapse7" class="accordion-collapse collapse" aria-labelledby="heading7" data-bs-parent="#accordionExample">
                                <div class="accordion-body">
                                    <ul>
                                        <li class="location-link">Muttex Pharmacy Limited  </li>
                                        <li class="location-link">
                                            St. Anthony's Catholic Church Ejigbo-Iwo Road
                                        </li>
                                        <li class="location-link"> Muttex Pharmacy Limited Ejigbo-Iwo Road  </li>
                                        <li class="location-link">Ayeloja Ablaze Boutique Ejigbo-Iwo Road    </li>
                                        <li class="location-link">
                                            Conoil Filling Station Ejigbo-Iwo Road 
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>


                        <div class="accordion-item">
                            <h2 class="accordion-header" id="heading8">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse8" aria-expanded="false" aria-controls="collapse8">+2349025384299
                                </button>
                            </h2>
                            <div id="collapse8" class="accordion-collapse collapse" aria-labelledby="heading8" data-bs-parent="#accordionExample">
                                <div class="accordion-body">
                                    <ul>
                                        <li class="location-link">Hephsam Pharmacy 13 Akute-Ijoko Road  Ifo  </li>
                                        <li class="location-link">
                                            Marvellous House Academy  Off Pipeline Road Ifo ogun state
                                        </li>
                                        <li class="location-link"> 13  Akute-Ijoko Road  </li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item">
                            <h2 class="accordion-header" id="heading9">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse9" aria-expanded="false" aria-controls="collapse9">+2349120000000
                                </button>
                            </h2>
                            <div id="collapse9" class="accordion-collapse collapse" aria-labelledby="heading9" data-bs-parent="#accordionExample">
                                <div class="accordion-body">
                                    <ul>
                                        <li class="location-link">United African Methodist Church Idunganran Street Isale Eko Avenue  </li>
                                        <li class="location-link">
                                            Idumota Medical Market  Idunganran Street Isale Eko Avenue
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item">
                            <h2 class="accordion-header" id="heading10">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse10" aria-expanded="false" aria-controls="collapse10">+2348088601832
                                </button>
                            </h2>
                            <div id="collapse10" class="accordion-collapse collapse" aria-labelledby="heading10" data-bs-parent="#accordionExample">
                                <div class="accordion-body">
                                    <ul>
                                        <li class="location-link">150  Apata Street </li>
                                        <li class="location-link">
                                            Christian Faith Deliverance Ministry Church  Morocco Road
                                        </li>
                                        <li>
                                            Mrs Aliu Mini Mart  Morocco Road
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item">
                            <h2 class="accordion-header" id="heading11">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse11" aria-expanded="false" aria-controls="collapse11">
                                    +2348036104604
                                </button>
                            </h2>
                            <div id="collapse11" class="accordion-collapse collapse" aria-labelledby="heading11" data-bs-parent="#accordionExample">
                                <div class="accordion-body">
                                    <ul>
                                        <li class="location-link">Delta Guest House Ashaka Road Ndokwa West </li>
                                        <li class="location-link"> Nation Of Greatness Int'l Gospel Church Ashaka Road Off Butter Garden  Ndokwa West</li>
                                    </ul>
                                </div>
                            </div>
                        </div>


                        <!-- <div class="accordion-item">
                            <h2 class="accordion-header" id="heading10">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse10" aria-expanded="false" aria-controls="collapse10">+
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse10" aria-expanded="false" aria-controls="collapse10">+2348036104604
                                </button>
                            </h2>
                            <div id="collapse10" class="accordion-collapse collapse" aria-labelledby="heading10" data-bs-parent="#accordionExample">
                                <div class="accordion-body">
                                    <ul>
                                        <li class="location-link">Delta Guest House Ashaka Road Ndokwa West </li>
                                        <li class="location-link"> Nation Of Greatness Int'l Gospel Church Ashaka Road Off Butter Garden  Ndokwa West</li>
                                    </ul>
                                </div>
                            </div>
                        </div> -->

                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-8 col-sm-12 px-0">
            <div class="card">
                <div class="card-body" id="map">
                </div>
            </div>
        </div>
        <!-- <div class="col-md-2 col-sm-12">
            <div class="card">
                <div class="card-header">
                    Landmarks
                </div>
                <div class="card-body">
                    <ol>
                        <li>Gatelink Filling Station</li>
                        <li>United Bank For Africa</li>
                        <li>Oba Erinwole Road</li>
                        <li>Obafemi Owode  Ogun State</li>
                      </ol>
                   
                </div>
            </div>
        </div> -->
    </div>
</div>
<body>
<script src="js/bootstrap.min.js"></script>
<script
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBUbld_FSE0dyNm3JyZHUJMW6IJvjuKysw&callback=initMap&libraries=places&v=weekly"
        defer
></script>
<script src="/data.js"></script>
<script>
    let searchLocation = '39 olonode street alagomeji sabo yaba';
    document.querySelectorAll('.location-link').forEach((e)=>{
        e.addEventListener('click',()=>{
            searchLocation=(e.textContent);
            initMap();
        })
    })
    document.querySelectorAll('.accordion-button').forEach((e)=>{
        e.addEventListener('click',()=>{
            let filterResult = (calls.filter((call)=>{
                let str = e.textContent
                return (call.phone_no) == str
            }))[0]
              document.querySelector('#all-reponse').innerHTML=""
            let cols = `<td>${filterResult["Date"]}</td>
                                <td>${filterResult.phone_no}</td>
                                <td>${filterResult["Market"]}</td>
                                <td>${filterResult['Client']}</td>
                                <td>${filterResult['Product']}</td>
                                <td>${filterResult[ "PIN"]}</td>
                                <td>${filterResult["Is Sproxil Alerted"]}</td>
                                <td>${filterResult["Survey Length"]}</td>
                                <td>${filterResult[ "What is the name of the shop where the product was purchased?"]}</td>
                                <td>${filterResult["Please describe where this shop is located. Is there a landmark or bus stop close by?"]}</td>
                                <td>${filterResult[ "In what city did you purchase the product?"]}</td>
                                <td>${filterResult["In what state did you purchase the product?"]}</td>`;
                                document.querySelector('#all-reponse').innerHTML=cols
            document.querySelector('.tpi-calls').style.display ='block'
        })
    })

    let map;
    let service;
    let infowindow;

    function initMap() {
        const abuja = new google.maps.LatLng(9.072264,7.491302);

        infowindow = new google.maps.InfoWindow();
        map = new google.maps.Map(document.getElementById("map"), {
            center: abuja,
            zoom: 17,
        });

        const request = {
            query: searchLocation,
            fields: ["name", "geometry"],
        };

        service = new google.maps.places.PlacesService(map);
        service.findPlaceFromQuery(request, (results, status) => {
            if (status === google.maps.places.PlacesServiceStatus.OK && results) {
                for (let i = 0; i < results.length; i++) {
                    createMarker(results[i]);
                }

                map.setCenter(results[0].geometry.location);
            }
        });
    }

    function createMarker(place) {
        if (!place.geometry || !place.geometry.location) return;

        const marker = new google.maps.Marker({
            map,
            position: place.geometry.location,
        });

        google.maps.event.addListener(marker, "click", () => {
            infowindow.setContent(place.name || "");
            infowindow.open(map);
        });
    }

    window.initMap = initMap;

</script>
</body>
</html>